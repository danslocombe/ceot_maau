"use strict";(self.webpackChunkrust_webpack_template=self.webpackChunkrust_webpack_template||[]).push([[845],{465:(e,t,n)=>{function r(){return performance.now()}n.d(t,{G:()=>r})},605:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{tg:()=>c.tg});var o=n(650),c=n(903),i=e([o]);o=(i.then?(await i)():i)[0],(0,c.lI)(o),o.__wbindgen_start(),r()}catch(e){r(e)}}))},650:(e,t,n)=>{var r=n(903),o=n(465);e.exports=n.v(t,e.id,"48e6656a4dce34ea24e1",{"./index_bg.js":{__wbindgen_string_new:r.yc,__wbg_log_31ba0a55511144c4:r.M$,__wbg_new_e1783397fe548703:r.EF,__wbg_stack_a86c1d26fea867df:r.ZH,__wbg_error_e4ae10165260c6e8:r.N7,__wbindgen_throw:r.Qn,__wbindgen_init_externref_table:r.bL},"./snippets/rust-webpack-template-eb3e344350874cf2/inline1.js":{performance_now:o.G}})},845:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.r(t);var o=n(605),c=e([o]);o=(c.then?(await c)():c)[0];const h=window.location.search,_=new URLSearchParams(h);var i,a=_.get("q"),l=document.getElementById("entry"),d=document.getElementById("results"),s=document.getElementById("explanation"),u="1"===_.get("debug"),f="",p=12;function m(e){return"CEDict"===e?"ce-dict":"CCanto"===e?"cc-canto":""}function g(e){const t=JSON.parse(e),n=t.results;if(0!=n.length){var r=document.createElement("ul");if(r.setAttribute("class","card"),u){let e=document.createElement("div");e.setAttribute("class","debug-info");let n=document.createElement("pre");n.innerText=JSON.stringify(t.timings,null,2),e.appendChild(n),r.appendChild(e);const o=document.createElement("hr");r.appendChild(o)}for(let e of n){let t=document.createElement("li");t.setAttribute("class","card-item");let n=e.rendered_entry.entry_source,o=m(n),c=document.createElement("span");c.setAttribute("class","item-english");let i=document.createElement("h2");i.setAttribute("class","title");const a=E(e.rendered_entry.characters);i.appendChild(a),c.appendChild(i);let l=document.createElement("span");l.setAttribute("class","item-jyutping");{let t=document.createElement("h3");t.setAttribute("class","title"),t.setAttribute("title",e.rendered_entry.entry_source);const n=y(e.rendered_entry.jyutping);t.appendChild(n),l.appendChild(t)}t.appendChild(l),t.appendChild(c),r.appendChild(t);for(let t=0;t<e.rendered_entry.english_definitions.length;t++){let n=e.rendered_entry.english_definitions[t],o=document.createElement("li");o.setAttribute("class","card-item");let c=document.createElement("span");c.setAttribute("class","item-english indent"),c.innerHTML=n,o.appendChild(c),r.appendChild(o)}let d=document.createElement("p");if(d.setAttribute("class","item-english "+o),"CEDict"===n?d.innerText="(Sourced from CEDict)":"CCanto"==n&&(d.innerText="(Sourced from CC-Canto)"),r.appendChild(d),u){let t=document.createElement("div");t.setAttribute("class","debug-info");let n=document.createElement("pre");n.innerText=JSON.stringify(e,null,2),t.appendChild(n),r.appendChild(t)}}if(d.appendChild(r),n.length===p){var o=document.createElement("button");o.setAttribute("class","load-more-btn"),o.innerText="More",o.onclick=()=>{p*=2,d.innerHTML="",g(i.search(f,p))},d.appendChild(o)}}}function b(e){const t=document.createElement("a");return t.href="#",t.className="character-link",t.textContent=e,t.onclick=t=>{t.preventDefault(),l.value=e,l.dispatchEvent(new Event("input"))},t}function w(e){const t=document.createElement("a");return t.href="#",t.className="jyutping-link",t.onclick=t=>{t.preventDefault(),l.value=e,l.dispatchEvent(new Event("input"))},t}function y(e){const t=document.createElement("div");t.innerHTML=e;const n=document.createElement("span");return C(t,n),n}function E(e){const t=document.createElement("div");t.innerHTML=e;const n=document.createElement("span");return N(t,n),n}function C(e,t){let n=null,r="";function o(){if(n&&r.trim().length>0){const e=w(r.trim());for(;n.firstChild;)e.appendChild(n.firstChild);t.appendChild(e),n=null,r=""}}function c(e){if(e.nodeType===Node.TEXT_NODE){const c=e.textContent.split(/(\s+)/);for(let e of c)e.trim().length>0?(n||(n=document.createElement("span")),n.appendChild(document.createTextNode(e)),r+=e):e.length>0&&(o(),t.appendChild(document.createTextNode(e)))}else if(e.nodeType===Node.ELEMENT_NODE){n||(n=document.createElement("a"),n.className="jyutping-link");const t=document.createElement(e.tagName);for(let n of e.attributes)t.setAttribute(n.name,n.value);for(let n of e.childNodes)i(n,t);n.appendChild(t)}}function i(e,t){if(e.nodeType===Node.TEXT_NODE)t.appendChild(document.createTextNode(e.textContent)),r+=e.textContent;else if(e.nodeType===Node.ELEMENT_NODE){const n=document.createElement(e.tagName);for(let t of e.attributes)n.setAttribute(t.name,t.value);for(let t of e.childNodes)i(t,n);t.appendChild(n)}}for(let t of e.childNodes)c(t);o()}function N(e,t){function n(e){if(e.nodeType===Node.TEXT_NODE){const n=e.textContent;for(let e of n)t.appendChild(b(e))}else if(e.nodeType===Node.ELEMENT_NODE){const n=document.createElement(e.tagName);for(let t of e.attributes)n.setAttribute(t.name,t.value);for(let t of e.childNodes)if(t.nodeType===Node.TEXT_NODE)for(let e of t.textContent)n.appendChild(b(e));else r(t,n);t.appendChild(n)}}function r(e,t){if(e.nodeType===Node.TEXT_NODE)for(let n of e.textContent)t.appendChild(b(n));else if(e.nodeType===Node.ELEMENT_NODE){const n=document.createElement(e.tagName);for(let t of e.attributes)n.setAttribute(t.name,t.value);for(let t of e.childNodes)r(t,n);t.appendChild(n)}}for(let t of e.childNodes)n(t)}async function T(e){try{const t=await v(),n=await D(t,e);if(n)return console.log("Using cached dictionary from IndexedDB"),n}catch(e){console.warn("IndexedDB access failed, falling back to network:",e)}console.log("Fetching dictionary from network");const t=await fetch(e,{cache:"force-cache"});if(!t.ok)throw new Error(`Failed to fetch dictionary blob: ${t.status} ${t.statusText}`);const n=await t.arrayBuffer();try{const t=await v();await A(t,e,n),console.log("Dictionary cached in IndexedDB")}catch(e){console.warn("Failed to cache dictionary in IndexedDB:",e)}return n}T("full.jyp_dict").then((e=>{console.log("Got dictionary blob",e.byteLength,"bytes");const t=new Uint8Array(e);i=new o.tg(t),console.log("Finished search init!"),l.removeAttribute("disabled"),l.setAttribute("placeholder","lou5 si1, teacher, 老師, ..."),l.focus();const n=e=>{if(d.innerHTML="",e.length>0){f!==e&&(f=e,p=12),g(i.search(e,p)),s.hidden=!0;const t=new URL(window.location);t.searchParams.set("q",e),window.history.replaceState({},"",t)}else{l.setAttribute("placeholder",""),s.hidden=!1,f="",p=12;const e=new URL(window.location);e.searchParams.delete("q"),window.history.replaceState({},"",e)}};l.addEventListener("input",(e=>n(e.target.value))),a&&(n(a),l.value=a)}));const x="jyut";function v(){return new Promise(((e,t)=>{const n=indexedDB.open("jyutping_dict_cache",1);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(x)||t.createObjectStore(x)}}))}function D(e,t){return new Promise(((n,r)=>{const o=e.transaction([x],"readonly").objectStore(x).get(t);o.onerror=()=>r(o.error),o.onsuccess=()=>n(o.result)}))}function A(e,t,n){return new Promise(((r,o)=>{const c=e.transaction([x],"readwrite").objectStore(x).put(n,t);c.onerror=()=>o(c.error),c.onsuccess=()=>r()}))}r()}catch(k){r(k)}}))},903:(e,t,n)=>{let r;function o(e){r=e}n.d(t,{EF:()=>w,M$:()=>b,N7:()=>g,Qn:()=>N,ZH:()=>y,bL:()=>E,lI:()=>o,tg:()=>m,yc:()=>C});let c=new("undefined"==typeof TextDecoder?(0,module.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});c.decode();let i=null;function a(){return null!==i&&0!==i.byteLength||(i=new Uint8Array(r.memory.buffer)),i}function l(e,t){return e>>>=0,c.decode(a().subarray(e,e+t))}let d=0,s=new("undefined"==typeof TextEncoder?(0,module.require)("util").TextEncoder:TextEncoder)("utf-8");const u="function"==typeof s.encodeInto?function(e,t){return s.encodeInto(e,t)}:function(e,t){const n=s.encode(e);return t.set(n),{read:e.length,written:n.length}};function f(e,t,n){if(void 0===n){const n=s.encode(e),r=t(n.length,1)>>>0;return a().subarray(r,r+n.length).set(n),d=n.length,r}let r=e.length,o=t(r,1)>>>0;const c=a();let i=0;for(;i<r;i++){const t=e.charCodeAt(i);if(t>127)break;c[o+i]=t}if(i!==r){0!==i&&(e=e.slice(i)),o=n(o,r,r=i+3*e.length,1)>>>0;const t=a().subarray(o+i,o+r);i+=u(e,t).written,o=n(o,r,i,1)>>>0}return d=i,o}let p=null;function h(){return(null===p||!0===p.buffer.detached||void 0===p.buffer.detached&&p.buffer!==r.memory.buffer)&&(p=new DataView(r.memory.buffer)),p}const _="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>r.__wbg_jyutpingsearch_free(e>>>0,1)));class m{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,_.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_jyutpingsearch_free(e,0)}constructor(e){const t=function(e,t){const n=t(1*e.length,1)>>>0;return a().set(e,n/1),d=e.length,n}(e,r.__wbindgen_malloc),n=d,o=r.jyutpingsearch_new(t,n);return this.__wbg_ptr=o>>>0,_.register(this,this.__wbg_ptr,this),this}search(e,t){let n,o;try{const c=f(e,r.__wbindgen_malloc,r.__wbindgen_realloc),i=d,a=r.jyutpingsearch_search(this.__wbg_ptr,c,i,t);return n=a[0],o=a[1],l(a[0],a[1])}finally{r.__wbindgen_free(n,o,1)}}}function g(e,t){let n,o;try{n=e,o=t,console.error(l(e,t))}finally{r.__wbindgen_free(n,o,1)}}function b(e){console.log(e)}function w(){return new Error}function y(e,t){const n=f(t.stack,r.__wbindgen_malloc,r.__wbindgen_realloc),o=d;h().setInt32(e+4,o,!0),h().setInt32(e+0,n,!0)}function E(){const e=r.__wbindgen_export_3,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)}function C(e,t){return l(e,t)}function N(e,t){throw new Error(l(e,t))}}}]);